## 用户管理

### 基本介绍

Linux系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统

### 添加用户&设置密码

#### 基本语法

```shell
>>> useradd
-d 指定家目录
-g 指定用户组
-s 指定用户登入后所使用的shell
-m 自动创建用户的家目录。

>>> passwd username  更改密码
```

> 命令：
> https://cloud.tencent.com/developer/article/1775050
>
> 关于用户shell登录可以看
>
> https://blog.csdn.net/wqh0830/article/details/87793576
>
> https://www.cnblogs.com/zhouhbing/p/4179586.html

#### 示例

当创建用户成功后，会自动的创建和用户同名的家目录，也可以通过：`useradd -d` 给新创建的用户指定家目录

```shell
root@ubuntu:/home# useradd -m -s /bin/bash callmewenhao1
root@ubuntu:/home# ls
callmewenhao1  zhaowenhao

root@ubuntu:/home# passwd callmewenhao1
New password:
Retype new password:
passwd: password updated successfully

root@ubuntu:/home# su callmewenhao1
callmewenhao1@ubuntu:/home$ ls
callmewenhao1  zhaowenhao
callmewenhao1@ubuntu:/home$ cd ..
callmewenhao1@ubuntu:/$ ls
bin  boot  cdrom  dev  etc  home  lib  lib32  lib64  libx32  lost+found  media  mnt  opt  proc  root  run  sbin  snap  srv  swapfile  sys  tmp  usr  var

callmewenhao1@ubuntu:/$ logout  退出普通用户:exit
bash: logout: not login shell: use `exit'
callmewenhao1@ubuntu:/$ exit
exit
root@ubuntu:/home# logout  退出root用户:logout
zhaowenhao@ubuntu:/home$
```

注意：当shell登录新用户时出现：/usr/bin/xauth:  file /home/callmewenhao/.Xauthority does not exist，退出再登录以下就行了

### 修改密码(指定用户)

#### 基本语法（同上）

- `passwd username`

### 删除用户

#### 基本语法

- `userdel -r username` 要在root下删除用户，否则权限不够，使用`-r`把home目录和用户邮箱删除

#### 示例

```shell
root@ubuntu:/home# userdel -r callmewenhao1
userdel: callmewenhao1 mail spool (/var/mail/callmewenhao1) not found
root@ubuntu:/home# ls
callmewenhao  zhaowenhao
```

### 查询用户信息

id root

用户id 组id 组

### 切换用户

su - username

#### 细节说明

从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。

当需要返回到原来用户时，使用exit/logout指令

### 查看当前用户/登录用户

whoami/who am i  第一次登录到服务器的信息

### 用户组

组方便系统可以对有共性/权限的多个用户进行统一的管理

新增组

groupadd groupname

删除组

groupdel groupname

增加用户时直接加上组

useradd -g groupname username

如果没有指定group，会建一个同名的group，并将用户加入该组

修改用户的组

usermod -g newgroupname username

